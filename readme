# 專案介紹

這是一個使用 `nvidia/parakeet-tdt-0.6b-v2` 模型的 Python 專案，
`parakeet-tdt-0.6b-v2` 的功能是將語音轉成文字(speech-to-text)。
此專案僅將語音轉成 text，`nvidia/parakeet-tdt-0.6b-v2` 模型僅提供輸出 text，若希望輸出 srt，請使用 whisper 模型。

## 系統需求

### 硬體需求
- **CPU**: 任何現代多核心處理器
- **記憶體**: 至少 8GB RAM
- **GPU**: 
  - 建議: 具有至少 6GB VRAM 的 NVIDIA GPU
  - 最低: 具有 4GB VRAM 的 NVIDIA GPU (將使用分段處理功能)
  - 無 GPU: 可使用 CPU 運行，但處理速度會大幅降低

### 軟體需求
- **作業系統**: Windows 10/11, macOS, 或 Linux
- **Python**: 3.10 (建議) 或 3.9-3.11
- **CUDA**: 如使用 GPU，需要安裝 CUDA 11.7 或以上版本（僅在使用 GPU 時必要）

## 環境建置
1. 安裝 Python 3.10
2. 安裝 FFmpeg
   ```
   # Windows (使用 Chocolatey)
   choco install ffmpeg
   
   # 或手動下載並解壓縮到 C:\Program Files\ffmpeg
   # 下載網址: https://github.com/BtbN/FFmpeg-Builds/releases
   # 然後將 C:\Program Files\ffmpeg\bin 加入系統環境變數 PATH
   ```

3. 如果要使用 GPU，請安裝 CUDA 11.7 或以上版本
   - 可從 [NVIDIA 官方網站](https://developer.nvidia.com/cuda-downloads) 下載
   - 確保安裝相容於您 PyTorch 版本的 CUDA

4. 使用 `pip` 安裝以下套件
   ```powershell
   pip install moviepy torch torchaudio nemo_toolkit[asr]
   ```

5. 首次運行時，程式會自動下載模型 (約 1.2GB)

## 驗證環境設置
請使用以下命令來確認環境是否正確設置：

### 1. 檢查 Python 版本
```bash
python --version
```
預期輸出：`Python 3.10.x`（或 3.9.x-3.11.x）

### 2. 檢查 FFmpeg 安裝
```bash
ffmpeg -version
```
預期輸出：FFmpeg 版本資訊，確認可以成功執行 ffmpeg 命令

### 3. 檢查 CUDA 版本（僅使用 GPU 時必要）
```bash
nvidia-smi
```
預期輸出：顯示 NVIDIA GPU 資訊和已安裝的 CUDA 版本

### 4. 檢查 Python 套件
```bash
pip list | findstr moviepy
pip list | findstr torch
pip list | findstr torchaudio
pip list | findstr nemo_toolkit
```
預期輸出：顯示已安裝的相應套件及其版本

### 5. 檢查 PyTorch 是否能識別 GPU
```bash
python -c "import torch; print('GPU 可用:' if torch.cuda.is_available() else 'GPU 不可用'); print(f'GPU 數量: {torch.cuda.device_count()}'); print(f'GPU 名稱: {torch.cuda.get_device_name(0) if torch.cuda.is_available() else \"無\"}')"
```
預期輸出：顯示 GPU 狀態和名稱（如果使用 GPU）

### 6. 檢查 NeMo 套件
```bash
python -c "from nemo.collections.asr.models import EncDecCTCModelBPE; print('NeMo ASR 模組已正確安裝')"
```
預期輸出：`NeMo ASR 模組已正確安裝`（如果有錯誤則表示未正確安裝）

## 功能
1. 使用者可以上傳音檔，.wav 或 .flac 格式
2. 若是使用者上傳的是影片，則需要將影片轉為音訊之後，再給 model 將語音轉文字

## 注意事項
- 處理長音訊時，程式會自動分段處理以避免顯存不足
- 若要處理大型檔案，建議使用具有更多 VRAM 的 GPU


